#!/usr/bin/env ruby -wKU

$LOAD_PATH << File.join(File.dirname(__FILE__), "..", "lib")

%w{rubygems fugu optparse}.each { |m| require m }

options = {}
OptionParser.new() do |opts|
  opts.banner = "Usage: #{$0} RANGE"

  options[:action] = "puff"
  
  opts.on('-s', '--shrink', 'Shrink expression') do
    options[:action] = "shrink"
  end
  
  opts.parse!
end

res = case options[:action]
when "puff"   then Fugu.puff(ARGV[0]).join("\n")
when "shrink" then Fugu.shrink(ARGV[0])
end

puts res